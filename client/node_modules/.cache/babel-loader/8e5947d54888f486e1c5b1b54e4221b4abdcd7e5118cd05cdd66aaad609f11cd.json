{"ast":null,"code":"/**\n * @file xhr.js\n */\n\n/**\n * A wrapper for videojs.xhr that tracks bandwidth.\n *\n * @param {Object} options options for the XHR\n * @param {Function} callback the callback to call when done\n * @return {Request} the xhr request that is going to be made\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nvar _videoJs = require('video.js');\nvar _videoJs2 = _interopRequireDefault(_videoJs);\nvar xhrFactory = function xhrFactory() {\n  var xhr = function XhrFunction(options, callback) {\n    // Add a default timeout for all hls requests\n    options = (0, _videoJs.mergeOptions)({\n      timeout: 45e3\n    }, options);\n\n    // Allow an optional user-specified function to modify the option\n    // object before we construct the xhr request\n    var beforeRequest = XhrFunction.beforeRequest || _videoJs2['default'].Hls.xhr.beforeRequest;\n    if (beforeRequest && typeof beforeRequest === 'function') {\n      var newOptions = beforeRequest(options);\n      if (newOptions) {\n        options = newOptions;\n      }\n    }\n    var request = (0, _videoJs.xhr)(options, function (error, response) {\n      var reqResponse = request.response;\n      if (!error && reqResponse) {\n        request.responseTime = Date.now();\n        request.roundTripTime = request.responseTime - request.requestTime;\n        request.bytesReceived = reqResponse.byteLength || reqResponse.length;\n        if (!request.bandwidth) {\n          request.bandwidth = Math.floor(request.bytesReceived / request.roundTripTime * 8 * 1000);\n        }\n      }\n\n      // videojs.xhr now uses a specific code on the error\n      // object to signal that a request has timed out instead\n      // of setting a boolean on the request object\n      if (error && error.code === 'ETIMEDOUT') {\n        request.timedout = true;\n      }\n\n      // videojs.xhr no longer considers status codes outside of 200 and 0\n      // (for file uris) to be errors, but the old XHR did, so emulate that\n      // behavior. Status 206 may be used in response to byterange requests.\n      if (!error && !request.aborted && response.statusCode !== 200 && response.statusCode !== 206 && response.statusCode !== 0) {\n        error = new Error('XHR Failed with a response of: ' + (request && (reqResponse || request.responseText)));\n      }\n      callback(error, request);\n    });\n    var originalAbort = request.abort;\n    request.abort = function () {\n      request.aborted = true;\n      return originalAbort.apply(request, arguments);\n    };\n    request.uri = options.uri;\n    request.requestTime = Date.now();\n    return request;\n  };\n  return xhr;\n};\nexports['default'] = xhrFactory;\nmodule.exports = exports['default'];","map":{"version":3,"names":["Object","defineProperty","exports","value","_interopRequireDefault","obj","__esModule","_videoJs","require","_videoJs2","xhrFactory","xhr","XhrFunction","options","callback","mergeOptions","timeout","beforeRequest","Hls","newOptions","request","error","response","reqResponse","responseTime","Date","now","roundTripTime","requestTime","bytesReceived","byteLength","length","bandwidth","Math","floor","code","timedout","aborted","statusCode","Error","responseText","originalAbort","abort","apply","arguments","uri","module"],"sources":["C:/Users/J3adl30y/Desktop/videostreaming/client/node_modules/videojs-contrib-hls/es5/xhr.js"],"sourcesContent":["/**\n * @file xhr.js\n */\n\n/**\n * A wrapper for videojs.xhr that tracks bandwidth.\n *\n * @param {Object} options options for the XHR\n * @param {Function} callback the callback to call when done\n * @return {Request} the xhr request that is going to be made\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar xhrFactory = function xhrFactory() {\n  var xhr = function XhrFunction(options, callback) {\n    // Add a default timeout for all hls requests\n    options = (0, _videoJs.mergeOptions)({\n      timeout: 45e3\n    }, options);\n\n    // Allow an optional user-specified function to modify the option\n    // object before we construct the xhr request\n    var beforeRequest = XhrFunction.beforeRequest || _videoJs2['default'].Hls.xhr.beforeRequest;\n\n    if (beforeRequest && typeof beforeRequest === 'function') {\n      var newOptions = beforeRequest(options);\n\n      if (newOptions) {\n        options = newOptions;\n      }\n    }\n\n    var request = (0, _videoJs.xhr)(options, function (error, response) {\n      var reqResponse = request.response;\n\n      if (!error && reqResponse) {\n        request.responseTime = Date.now();\n        request.roundTripTime = request.responseTime - request.requestTime;\n        request.bytesReceived = reqResponse.byteLength || reqResponse.length;\n        if (!request.bandwidth) {\n          request.bandwidth = Math.floor(request.bytesReceived / request.roundTripTime * 8 * 1000);\n        }\n      }\n\n      // videojs.xhr now uses a specific code on the error\n      // object to signal that a request has timed out instead\n      // of setting a boolean on the request object\n      if (error && error.code === 'ETIMEDOUT') {\n        request.timedout = true;\n      }\n\n      // videojs.xhr no longer considers status codes outside of 200 and 0\n      // (for file uris) to be errors, but the old XHR did, so emulate that\n      // behavior. Status 206 may be used in response to byterange requests.\n      if (!error && !request.aborted && response.statusCode !== 200 && response.statusCode !== 206 && response.statusCode !== 0) {\n        error = new Error('XHR Failed with a response of: ' + (request && (reqResponse || request.responseText)));\n      }\n\n      callback(error, request);\n    });\n    var originalAbort = request.abort;\n\n    request.abort = function () {\n      request.aborted = true;\n      return originalAbort.apply(request, arguments);\n    };\n    request.uri = options.uri;\n    request.requestTime = Date.now();\n    return request;\n  };\n\n  return xhr;\n};\n\nexports['default'] = xhrFactory;\nmodule.exports = exports['default'];"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}