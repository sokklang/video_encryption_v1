{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\J3adl30y\\\\Desktop\\\\videostreaminghttps\\\\client\\\\src\\\\VideoPlayer.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from \"react\";\nimport Hls from \"hls.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VideoPlayer = () => {\n  _s();\n  const videoRef = useRef(null);\n  const hlsRef = useRef(null);\n  const [availableResolutions, setAvailableResolutions] = useState([]);\n  const [selectedResolution, setSelectedResolution] = useState(\"\");\n  useEffect(() => {\n    const video = videoRef.current;\n    if (Hls.isSupported()) {\n      const hls = new Hls();\n      hlsRef.current = hls;\n      hls.loadSource(\"http://192.168.1.200:8080/video/master.m3u8\");\n      hls.attachMedia(video);\n      hls.on(Hls.Events.MANIFEST_PARSED, function () {\n        const resolutions = hls.levels.map(level => ({\n          resolution: `${level.width}x${level.height}`,\n          bitrate: level.bitrate,\n          levelIndex: level.level\n        }));\n        setAvailableResolutions(resolutions);\n        setSelectedResolution(resolutions[0].resolution);\n        video.play(); // Start playback once the manifest is loaded\n      });\n      return () => {\n        if (hls) {\n          hls.destroy();\n        }\n      };\n    } else if (video.canPlayType(\"application/vnd.apple.mpegurl\")) {\n      video.src = \"http://192.168.1.200:8080/video/master.m3u8\";\n      video.addEventListener(\"loadedmetadata\", function () {\n        const resolution = `${video.videoWidth}x${video.videoHeight}`;\n        setAvailableResolutions([{\n          resolution\n        }]);\n        setSelectedResolution(resolution);\n        video.play(); // Start playback once the metadata is loaded\n      });\n    }\n  }, []);\n  const handleResolutionChange = event => {\n    const selectedRes = event.target.value;\n    setSelectedResolution(selectedRes);\n    const selectedLevelIndex = availableResolutions.find(res => res.resolution === selectedRes).levelIndex;\n    hlsRef.current.currentLevel = selectedLevelIndex;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"1280px\",\n      margin: \"0 auto\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      controls: true,\n      className: \"video-js vjs-default-skin\",\n      width: \"1280\",\n      height: \"720\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Select Resolution:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedResolution,\n        onChange: handleResolutionChange,\n        children: availableResolutions.map((res, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: res.resolution,\n          children: [res.resolution, \" (\", (res.bitrate / 1000).toFixed(0), \" kbps)\"]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoPlayer, \"tcxX5O7CMO/UHle3asd4yCYRQUU=\");\n_c = VideoPlayer;\nexport default VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useRef","useEffect","useState","Hls","jsxDEV","_jsxDEV","VideoPlayer","_s","videoRef","hlsRef","availableResolutions","setAvailableResolutions","selectedResolution","setSelectedResolution","video","current","isSupported","hls","loadSource","attachMedia","on","Events","MANIFEST_PARSED","resolutions","levels","map","level","resolution","width","height","bitrate","levelIndex","play","destroy","canPlayType","src","addEventListener","videoWidth","videoHeight","handleResolutionChange","event","selectedRes","target","value","selectedLevelIndex","find","res","currentLevel","style","margin","children","ref","controls","className","fileName","_jsxFileName","lineNumber","columnNumber","onChange","index","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/J3adl30y/Desktop/videostreaminghttps/client/src/VideoPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\r\nimport Hls from \"hls.js\";\r\n\r\nconst VideoPlayer = () => {\r\n  const videoRef = useRef(null);\r\n  const hlsRef = useRef(null);\r\n  const [availableResolutions, setAvailableResolutions] = useState([]);\r\n  const [selectedResolution, setSelectedResolution] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n\r\n    if (Hls.isSupported()) {\r\n      const hls = new Hls();\r\n      hlsRef.current = hls;\r\n\r\n      hls.loadSource(\"http://192.168.1.200:8080/video/master.m3u8\");\r\n      hls.attachMedia(video);\r\n\r\n      hls.on(Hls.Events.MANIFEST_PARSED, function () {\r\n        const resolutions = hls.levels.map((level) => ({\r\n          resolution: `${level.width}x${level.height}`,\r\n          bitrate: level.bitrate,\r\n          levelIndex: level.level,\r\n        }));\r\n        setAvailableResolutions(resolutions);\r\n        setSelectedResolution(resolutions[0].resolution);\r\n        video.play(); // Start playback once the manifest is loaded\r\n      });\r\n\r\n      return () => {\r\n        if (hls) {\r\n          hls.destroy();\r\n        }\r\n      };\r\n    } else if (video.canPlayType(\"application/vnd.apple.mpegurl\")) {\r\n      video.src = \"http://192.168.1.200:8080/video/master.m3u8\";\r\n      video.addEventListener(\"loadedmetadata\", function () {\r\n        const resolution = `${video.videoWidth}x${video.videoHeight}`;\r\n        setAvailableResolutions([{ resolution }]);\r\n        setSelectedResolution(resolution);\r\n        video.play(); // Start playback once the metadata is loaded\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const handleResolutionChange = (event) => {\r\n    const selectedRes = event.target.value;\r\n    setSelectedResolution(selectedRes);\r\n    const selectedLevelIndex = availableResolutions.find(\r\n      (res) => res.resolution === selectedRes\r\n    ).levelIndex;\r\n    hlsRef.current.currentLevel = selectedLevelIndex;\r\n  };\r\n\r\n  return (\r\n    <div style={{ width: \"1280px\", margin: \"0 auto\" }}>\r\n      <video\r\n        ref={videoRef}\r\n        controls\r\n        className=\"video-js vjs-default-skin\"\r\n        width=\"1280\"\r\n        height=\"720\"\r\n      />\r\n      <div>\r\n        <label>Select Resolution:</label>\r\n        <select value={selectedResolution} onChange={handleResolutionChange}>\r\n          {availableResolutions.map((res, index) => (\r\n            <option key={index} value={res.resolution}>\r\n              {res.resolution} ({(res.bitrate / 1000).toFixed(0)} kbps)\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoPlayer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}