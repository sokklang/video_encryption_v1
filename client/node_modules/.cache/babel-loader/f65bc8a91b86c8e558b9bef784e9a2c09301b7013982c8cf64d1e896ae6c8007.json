{"ast":null,"code":"/**\n * @file ad-cue-tags.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return']) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n  };\n}();\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\nvar _globalWindow = require('global/window');\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\n/**\n * Searches for an ad cue that overlaps with the given mediaTime\n */\nvar findAdCue = function findAdCue(track, mediaTime) {\n  var cues = track.cues;\n  for (var i = 0; i < cues.length; i++) {\n    var cue = cues[i];\n    if (mediaTime >= cue.adStartTime && mediaTime <= cue.adEndTime) {\n      return cue;\n    }\n  }\n  return null;\n};\nvar updateAdCues = function updateAdCues(media, track) {\n  var offset = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n  if (!media.segments) {\n    return;\n  }\n  var mediaTime = offset;\n  var cue = undefined;\n  for (var i = 0; i < media.segments.length; i++) {\n    var segment = media.segments[i];\n    if (!cue) {\n      // Since the cues will span for at least the segment duration, adding a fudge\n      // factor of half segment duration will prevent duplicate cues from being\n      // created when timing info is not exact (e.g. cue start time initialized\n      // at 10.006677, but next call mediaTime is 10.003332 )\n      cue = findAdCue(track, mediaTime + segment.duration / 2);\n    }\n    if (cue) {\n      if ('cueIn' in segment) {\n        // Found a CUE-IN so end the cue\n        cue.endTime = mediaTime;\n        cue.adEndTime = mediaTime;\n        mediaTime += segment.duration;\n        cue = null;\n        continue;\n      }\n      if (mediaTime < cue.endTime) {\n        // Already processed this mediaTime for this cue\n        mediaTime += segment.duration;\n        continue;\n      }\n\n      // otherwise extend cue until a CUE-IN is found\n      cue.endTime += segment.duration;\n    } else {\n      if ('cueOut' in segment) {\n        cue = new _globalWindow2['default'].VTTCue(mediaTime, mediaTime + segment.duration, segment.cueOut);\n        cue.adStartTime = mediaTime;\n        // Assumes tag format to be\n        // #EXT-X-CUE-OUT:30\n        cue.adEndTime = mediaTime + parseFloat(segment.cueOut);\n        track.addCue(cue);\n      }\n      if ('cueOutCont' in segment) {\n        // Entered into the middle of an ad cue\n        var adOffset = undefined;\n        var adTotal = undefined;\n\n        // Assumes tag formate to be\n        // #EXT-X-CUE-OUT-CONT:10/30\n\n        var _segment$cueOutCont$split$map = segment.cueOutCont.split('/').map(parseFloat);\n        var _segment$cueOutCont$split$map2 = _slicedToArray(_segment$cueOutCont$split$map, 2);\n        adOffset = _segment$cueOutCont$split$map2[0];\n        adTotal = _segment$cueOutCont$split$map2[1];\n        cue = new _globalWindow2['default'].VTTCue(mediaTime, mediaTime + segment.duration, '');\n        cue.adStartTime = mediaTime - adOffset;\n        cue.adEndTime = cue.adStartTime + adTotal;\n        track.addCue(cue);\n      }\n    }\n    mediaTime += segment.duration;\n  }\n};\nexports['default'] = {\n  updateAdCues: updateAdCues,\n  findAdCue: findAdCue\n};\nmodule.exports = exports['default'];","map":{"version":3,"names":["Object","defineProperty","exports","value","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_interopRequireDefault","obj","__esModule","_globalWindow","require","_globalWindow2","findAdCue","track","mediaTime","cues","cue","adStartTime","adEndTime","updateAdCues","media","offset","arguments","segments","segment","duration","endTime","VTTCue","cueOut","parseFloat","addCue","adOffset","adTotal","_segment$cueOutCont$split$map","cueOutCont","split","map","_segment$cueOutCont$split$map2","module"],"sources":["C:/Users/J3adl30y/Desktop/videostreaming/client/node_modules/videojs-contrib-hls/es5/ad-cue-tags.js"],"sourcesContent":["/**\n * @file ad-cue-tags.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\n/**\n * Searches for an ad cue that overlaps with the given mediaTime\n */\nvar findAdCue = function findAdCue(track, mediaTime) {\n  var cues = track.cues;\n\n  for (var i = 0; i < cues.length; i++) {\n    var cue = cues[i];\n\n    if (mediaTime >= cue.adStartTime && mediaTime <= cue.adEndTime) {\n      return cue;\n    }\n  }\n  return null;\n};\n\nvar updateAdCues = function updateAdCues(media, track) {\n  var offset = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n  if (!media.segments) {\n    return;\n  }\n\n  var mediaTime = offset;\n  var cue = undefined;\n\n  for (var i = 0; i < media.segments.length; i++) {\n    var segment = media.segments[i];\n\n    if (!cue) {\n      // Since the cues will span for at least the segment duration, adding a fudge\n      // factor of half segment duration will prevent duplicate cues from being\n      // created when timing info is not exact (e.g. cue start time initialized\n      // at 10.006677, but next call mediaTime is 10.003332 )\n      cue = findAdCue(track, mediaTime + segment.duration / 2);\n    }\n\n    if (cue) {\n      if ('cueIn' in segment) {\n        // Found a CUE-IN so end the cue\n        cue.endTime = mediaTime;\n        cue.adEndTime = mediaTime;\n        mediaTime += segment.duration;\n        cue = null;\n        continue;\n      }\n\n      if (mediaTime < cue.endTime) {\n        // Already processed this mediaTime for this cue\n        mediaTime += segment.duration;\n        continue;\n      }\n\n      // otherwise extend cue until a CUE-IN is found\n      cue.endTime += segment.duration;\n    } else {\n      if ('cueOut' in segment) {\n        cue = new _globalWindow2['default'].VTTCue(mediaTime, mediaTime + segment.duration, segment.cueOut);\n        cue.adStartTime = mediaTime;\n        // Assumes tag format to be\n        // #EXT-X-CUE-OUT:30\n        cue.adEndTime = mediaTime + parseFloat(segment.cueOut);\n        track.addCue(cue);\n      }\n\n      if ('cueOutCont' in segment) {\n        // Entered into the middle of an ad cue\n        var adOffset = undefined;\n        var adTotal = undefined;\n\n        // Assumes tag formate to be\n        // #EXT-X-CUE-OUT-CONT:10/30\n\n        var _segment$cueOutCont$split$map = segment.cueOutCont.split('/').map(parseFloat);\n\n        var _segment$cueOutCont$split$map2 = _slicedToArray(_segment$cueOutCont$split$map, 2);\n\n        adOffset = _segment$cueOutCont$split$map2[0];\n        adTotal = _segment$cueOutCont$split$map2[1];\n\n        cue = new _globalWindow2['default'].VTTCue(mediaTime, mediaTime + segment.duration, '');\n        cue.adStartTime = mediaTime - adOffset;\n        cue.adEndTime = cue.adStartTime + adTotal;\n        track.addCue(cue);\n      }\n    }\n    mediaTime += segment.duration;\n  }\n};\n\nexports['default'] = {\n  updateAdCues: updateAdCues,\n  findAdCue: findAdCue\n};\nmodule.exports = exports['default'];"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}